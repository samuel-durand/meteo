<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
	<title>Recherche de prévisions météo</title>
	<meta charset="UTF-8">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href=""></a></li>
                <li><a href=""></a></li>

            </ul>
        </nav>
    </header>
    <div id="main">
	<h1>Recherche de prévisions météo</h1>
	<form id="form-weather">
		<label for="city">Entrez une ville :</label>
		<input type="text" id="city" name="city" autocomplete="off">
		<button type="submit">Rechercher</button>
	</form>
	<div id="weather"></div>

	<script>
		const form = document.querySelector("form");
		const weatherDiv = document.getElementById("weather");

		const cities = ["Paris", "Marseille", "Lyon", "Toulouse", "Nice", "Nantes", "Strasbourg", "Montpellier", "Bordeaux", "Lille"];

		// Fonction pour récupérer les données météo pour une ville 
		function getWeatherForCity(city) {
			fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=e942b6abe0fcc9c5cdbe1baa8b50e5c6&units=metric`)
			.then(response => response.json())
			.then(data => {
				const temperature = data.main.temp;
                const wind = data.main.wind;
                const windSpeed = data.wind.speed;
				const description = data.weather[0].description;
				const iconUrl = `http://openweathermap.org/img/w/${data.weather[0].icon}.png`;
				weatherDiv.innerHTML += `<p>  Il fait actuellement ${temperature} degrés Celsius à ${city} avec ${description}  et une vitesse de vent de ${windSpeed} m/s.</p><img src="${iconUrl}"  alt="Weather icon">`;
			})
			.catch(error => {
				console.error(error);
				weatherDiv.innerHTML += `<p>Impossible de récupérer les données météo pour ${city}. Veuillez réessayer.</p>`;
			});
		}

		form.addEventListener("submit", event => {
			event.preventDefault();

			const city = form.elements.city.value;

			// Vérifie si l'utilisateur a entré une ville spécifique 
			if (city) {
				weatherDiv.innerHTML = "";
				getWeatherForCity(city);
			} else {
				// Si aucun nom de ville n'est entré, récupère les données météo pour toutes les villes en France
				cities.forEach(city => {
					getWeatherForCity(city);
				});
			}
		});
	</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.clouds2.min.js"></script>
<script>
		VANTA.CLOUDS2({
			el: "#main",
			mouseControls: true,
			touchControls: true,
			gyroControls: false,
			minHeight: 200.00,
			minWidth: 200.00,
			scale: 1.00,
			// Couleur du ciel par défaut
			skyColor: 0x57addc,
			cloudColor: 0x395387,
			texturePath: "noise.png"
		});

</script>

</div>

</body>
</html>

